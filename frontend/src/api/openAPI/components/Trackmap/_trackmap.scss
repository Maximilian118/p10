@use '../../../../scss/mixins';

.trackmap {
  width: 100%;
  height: 100%;
  @include mixins.flexbox-column;
  position: relative;

  // Track name displayed above the SVG.
  .trackmap-title {
    font-size: 0.85rem;
    opacity: 0.7;
    margin-bottom: 8px;
  }

  // SVG container fills the available width.
  .trackmap-svg {
    width: 100%;
    height: 100%;
    display: block;
  }

  // Car dot group — wraps each car dot for CSS transform-based animation.
  // Linear transition produces constant-velocity motion between position
  // updates (~3.7 Hz from OpenF1), matching the natural movement of a car
  // on track. Duration (800ms) intentionally exceeds the update interval
  // so dots are always mid-transition and never stop moving.
  .car-dot-group {
    transition: transform 800ms linear;
    will-change: transform;

    // Suppress transition on initial mount to prevent dots sliding from origin.
    &--no-transition {
      transition: none;
    }

    // Path-locked mode: JS rAF loop handles animation at 60fps.
    // CSS transitions are disabled to prevent fighting the JS-driven updates.
    &--path-locked {
      transition: none;
      will-change: transform;
    }

    // Hidden state — invisible but stays in DOM so rAF keeps animating.
    &--hidden {
      opacity: 0;
      pointer-events: none;
    }
  }

  // Car dot circle — handles interactive styles only.
  .car-dot {
    cursor: pointer;
  }

  // Corner number labels — non-interactive, subtly visible over the track.
  .corner-label {
    fill: rgba(255, 255, 255, 0.65);
    font-weight: 600;
    pointer-events: none;
  }

  // Sector boundary lines — non-interactive overlays.
  .sector-line {
    pointer-events: none;
  }

  // Mini-sector colored segments — overlay on track when a driver is selected.
  .mini-sector-segment {
    pointer-events: none;
    opacity: 0.9;
  }

  // Mini-sector separator lines — thin marks between mini-sector boundaries.
  .mini-sector-separator {
    pointer-events: none;
  }

  // Status text shown when no data or connecting.
  .trackmap-status {
    opacity: 0.5;
    font-size: 0.85rem;
    padding: 40px 0;
  }
}
