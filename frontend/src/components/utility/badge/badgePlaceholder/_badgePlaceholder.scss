@use '../../../../scss/mixins';
@use '../../../../scss/variables';
@use '../../../../scss/keyframes';

.badge-placeholder {
  // CSS custom properties for state-based styling.
  --arc-color: #{variables.$colour-2};
  --plus-color: #{variables.$colour-2};
  --arc-opacity: 0.7;
  --rotation-duration: 20s;

  width: var(--placeholder-size, 32px);
  height: var(--placeholder-size, 32px);
  border-radius: 50%;
  position: relative;
  cursor: pointer;
  background: linear-gradient(135deg, rgba(variables.$colour-1, 0.8) 0%, rgba(variables.$colour-2, 0.15) 100%);
  @include mixins.flexbox;
  transition: all variables.$trans-speed;

  // Corner arc elements hugging the circle edges.
  &__corner {
    position: absolute;
    width: var(--placeholder-size, 32px);
    height: var(--placeholder-size, 32px);
    border: 2px solid var(--arc-color);
    border-radius: 50%;
    box-sizing: border-box;
    animation: rotation var(--rotation-duration) linear infinite;
    opacity: var(--arc-opacity);

    &--top-left {
      top: 0;
      left: 0;
      border-right-color: transparent;
      border-bottom-color: transparent;
      clip-path: polygon(0 0, 35% 0, 35% 35%, 0 35%);
    }

    &--top-right {
      top: 0;
      right: 0;
      border-left-color: transparent;
      border-bottom-color: transparent;
      clip-path: polygon(65% 0, 100% 0, 100% 35%, 65% 35%);
    }

    &--bottom-left {
      bottom: 0;
      left: 0;
      border-right-color: transparent;
      border-top-color: transparent;
      clip-path: polygon(0 65%, 35% 65%, 35% 100%, 0 100%);
    }

    &--bottom-right {
      bottom: 0;
      right: 0;
      border-left-color: transparent;
      border-top-color: transparent;
      clip-path: polygon(65% 65%, 100% 65%, 100% 100%, 65% 100%);
    }
  }

  // Plus icon in the center using pseudo-elements.
  &__plus {
    position: relative;
    width: calc(var(--placeholder-size, 32px) * 0.5625);
    height: calc(var(--placeholder-size, 32px) * 0.5625);
    z-index: 1;

    &::before,
    &::after {
      content: '';
      position: absolute;
      background: var(--plus-color);
      border-radius: 1px;
    }

    &::before {
      top: 50%;
      left: 0;
      width: 100%;
      height: 2px;
      transform: translateY(-50%);
    }

    &::after {
      left: 50%;
      top: 0;
      width: 2px;
      height: 100%;
      transform: translateX(-50%);
    }
  }

  // Hover state - just update custom properties.
  &:hover {
    --arc-color: #{variables.$colour-3};
    --plus-color: #{variables.$colour-3};
    --arc-opacity: 1;
    --rotation-duration: 8s;

    background: linear-gradient(135deg, rgba(variables.$colour-1, 1) 0%, rgba(variables.$colour-2, 0.3) 100%);
    transform: scale(1.08);
    box-shadow: 0 0 12px 3px rgba(variables.$colour-2, 0.25);
  }

  // Active state (when drag target is over).
  &--active {
    --arc-color: #{variables.$mui-blue};
    --plus-color: #{variables.$mui-blue};

    border: 2px dashed variables.$mui-blue;
    background: rgba(variables.$mui-blue, 0.1);
  }

  // Selected state (when this slot is the target for badge assignment).
  &--selected {
    --arc-color: #{variables.$mui-blue};
    --plus-color: #{variables.$mui-blue};
    --arc-opacity: 1;
    --rotation-duration: 4s;

    box-shadow: 0 0 0 3px rgba(variables.$mui-blue, 0.4);

    // Ensure corners are blue.
    .badge-placeholder__corner {
      border-color: variables.$mui-blue;

      &--top-left {
        border-right-color: transparent;
        border-bottom-color: transparent;
      }
      &--top-right {
        border-left-color: transparent;
        border-bottom-color: transparent;
      }
      &--bottom-left {
        border-right-color: transparent;
        border-top-color: transparent;
      }
      &--bottom-right {
        border-left-color: transparent;
        border-top-color: transparent;
      }
    }

    // Ensure plus is blue.
    .badge-placeholder__plus::before,
    .badge-placeholder__plus::after {
      background: variables.$mui-blue;
    }
  }
}